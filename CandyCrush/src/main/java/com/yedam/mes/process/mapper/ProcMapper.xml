<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.mes.process.mapper.ProcMapper">
	<select id="selectOrder" resultType="OrderPlanVO">
		SELECT o.orsh_no as orsh_no
		     , o.ca_no as ca_no
		     , ca_nm 
		     , ordr_dtl_cnt
		     , TO_CHAR(dlvry_dt,'rrrr-MM-dd') as dlvry_dt
		     , TO_CHAR(orsh_dt,'rrrr-MM-dd') as orsh_dt
		     , orsh_pr
		     , d.cpr_cd as cpr_cd
		     , p.cpr_nm as cpr_nm
		     , m.cbmt_cd as cbmt_cd
		     , m.cm_cd as cm_cd
		     , m.cmm_cd as cmm_cd
		     , m.cbmt_qtt as cbmt_qtt
		     , m.bom_cd as bom_cd
		  FROM order_sheet o , order_sheet_detail d , cm_product_mng p , cm_account a, cm_bom_mng b, cm_bom_mtrl m
		 WHERE o.orsh_no = d.orsh_no
		   AND d.cpr_cd = p.cpr_cd(+)
		   AND o.ca_no = a.ca_no(+)
		   AND p.cpr_cd = b.cpr_cd(+)
		   AND b.bom_cd = m.bom_cd(+)
		   AND o.orsh_pr = '접수완료'
		 ORDER BY 1
	</select>
	<select id="selectOneOrder" parameterType="OrderPlanVO" resultType="OrderPlanVO">
		SELECT o.orsh_no as orsh_no
		     , o.ca_no as ca_no
		     , ordr_dtl_cnt
		     , TO_CHAR(dlvry_dt,'rrrr-MM-dd') as dlvry_dt
		     , TO_CHAR(orsh_dt,'rrrr-MM-dd') as orsh_dt
		     , orsh_pr
		     , d.cpr_cd as cpr_cd
		     , cpr_nm
		     , ca_nm
  		  FROM order_sheet o , order_sheet_detail d , cm_product_mng p , cm_account a
		 WHERE o.orsh_no = d.orsh_no
		   AND d.cpr_cd = p.cpr_cd(+)
           AND o.ca_no = a.ca_no(+)
           AND o.orsh_no = #{orshNo}
	</select>
	<insert id="insertPlan" parameterType="OrderPlanVO">
		
	</insert>
</mapper>